{"version":3,"sources":["../../../src/helpers/validator.ts"],"names":["MissingRequireFieldTermError","UncorrectedReferenceTermError","UnknownActionTermError","PHYSIC_COLUMN_NAMES","TERM_COLUMN_NAMES","MissingRequireFieldPhysicError","UncorrectedPathFormatPhysicError","validateTerm","term","parentTermName","length","termName","action","toUpperCase","description","reference","split","validatePhysic","physic","physicPath","validateCustomFieldId","customFields","keys","Error","k"],"mappings":"AACA,SAAQA,4BAAR,EAAsCC,6BAAtC,EAAqEC,sBAArE;AACA,SAAQC,mBAAR,EAA6BC,iBAA7B;AAEA,SAAQC,8BAAR,EAAwCC,gCAAxC;AAGA,OAAO,SAASC,YAAT,CAAsBC,IAAtB,EAAyC;AAAA;;AAC9C,MAAI,CAACA,IAAI,CAACC,cAAL,CAAoBC,MAAzB,EAAiC;AAC/B,UAAM,IAAIV,4BAAJ,CAAiCI,iBAAiB,CAACK,cAAnD,CAAN;AACD;;AACD,MAAI,CAACD,IAAI,CAACG,QAAL,CAAcD,MAAnB,EAA2B;AACzB,UAAM,IAAIV,4BAAJ,CAAiCI,iBAAiB,CAACO,QAAnD,CAAN;AACD;;AACD,MAAI,EAAEH,IAAI,CAACI,MAAL,KAAgB,EAAhB,IACFJ,IAAI,CAACI,MAAL,CAAYC,WAAZ,OAA8B,GAD5B,IAEFL,IAAI,CAACI,MAAL,CAAYC,WAAZ,OAA8B,GAF5B,IAGFL,IAAI,CAACI,MAAL,CAAYC,WAAZ,OAA8B,GAH9B,CAAJ,EAGwC;AACtC,UAAM,IAAIX,sBAAJ,EAAN;AACD;;AACD,MAAI,CAACM,IAAI,CAACM,WAAL,CAAiBJ,MAAtB,EAA8B;AAC5B,UAAM,IAAIV,4BAAJ,CAAiCI,iBAAiB,CAACU,WAAnD,CAAN;AACD;;AACD,MAAI,mBAAAN,IAAI,CAACO,SAAL,4DAAgBL,MAAhB,IAA0BF,IAAI,CAACO,SAAL,CAAeC,KAAf,CAAqB,GAArB,EAA0BN,MAA1B,KAAqC,CAAnE,EAAsE;AACpE,UAAM,IAAIT,6BAAJ,CAAkCO,IAAI,CAACG,QAAvC,EAAiDH,IAAI,CAACC,cAAtD,CAAN;AACD;AACF;AAED,OAAO,SAASQ,cAAT,CAAwBC,MAAxB,EAA+C;AACpD,MAAI,CAACA,MAAM,CAACT,cAAP,CAAsBC,MAA3B,EAAmC;AACjC,UAAM,IAAIL,8BAAJ,CAAmCF,mBAAmB,CAACM,cAAvD,CAAN;AACD;;AACD,MAAI,CAACS,MAAM,CAACP,QAAP,CAAgBD,MAArB,EAA6B;AAC3B,UAAM,IAAIL,8BAAJ,CAAmCF,mBAAmB,CAACQ,QAAvD,CAAN;AACD;;AACD,MAAI,CAACO,MAAM,CAACC,UAAP,CAAkBT,MAAvB,EAA+B;AAC7B,UAAM,IAAIL,8BAAJ,CAAmCF,mBAAmB,CAACgB,UAAvD,CAAN;AACD;;AACD,MAAID,MAAM,CAACC,UAAP,CAAkBH,KAAlB,CAAwB,GAAxB,EAA6BN,MAA7B,GAAsC,CAAtC,IAA2CQ,MAAM,CAACC,UAAP,CAAkBH,KAAlB,CAAwB,GAAxB,EAA6BN,MAA7B,GAAsC,CAArF,EAAwF;AACtF,UAAM,IAAIJ,gCAAJ,EAAN;AACD;AACF;AAED,OAAO,SAASc,qBAAT,CAA+BC,YAA/B,EAAqF;AAC1F,QAAMC,IAAuC,GAAG,CAC9C,cAD8C,EAE9C,YAF8C,EAG9C,iBAH8C,EAI9C,WAJ8C,EAK9C,UAL8C,CAAhD;;AAOA,MAAI,CAACD,YAAL,EAAmB;AACjB,UAAM,IAAIE,KAAJ,CAAU,mEAAV,CAAN;AACD;;AAGD,OAAK,MAAMC,CAAX,IAAgBF,IAAhB,EAAsB;AACpB,QAAI,OAAOD,YAAY,CAACG,CAAD,CAAnB,KAA2B,QAA/B,EAAyC;AACvC,YAAM,IAAID,KAAJ,CAAW,oEAAmEC,CAAE,EAAhF,CAAN;AACD;AACF;AACF","sourcesContent":["import {CustomFieldsIdCollection, IPhysic, ITerm} from '../types';\nimport {MissingRequireFieldTermError, UncorrectedReferenceTermError, UnknownActionTermError} from '../errors/terms';\nimport {PHYSIC_COLUMN_NAMES, TERM_COLUMN_NAMES} from '../constants';\nimport {$Keys} from 'utility-types';\nimport {MissingRequireFieldPhysicError, UncorrectedPathFormatPhysicError} from '../errors/physics';\n\n\nexport function validateTerm(term: ITerm): void {\n  if (!term.parentTermName.length) {\n    throw new MissingRequireFieldTermError(TERM_COLUMN_NAMES.parentTermName);\n  }\n  if (!term.termName.length) {\n    throw new MissingRequireFieldTermError(TERM_COLUMN_NAMES.termName);\n  }\n  if (!(term.action === '' ||\n      term.action.toUpperCase() === 'I' ||\n      term.action.toUpperCase() === 'U' ||\n      term.action.toUpperCase() === 'D')) {\n    throw new UnknownActionTermError();\n  }\n  if (!term.description.length) {\n    throw new MissingRequireFieldTermError(TERM_COLUMN_NAMES.description);\n  }\n  if (term.reference?.length && term.reference.split('.').length !== 3) {\n    throw new UncorrectedReferenceTermError(term.termName, term.parentTermName);\n  }\n}\n\nexport function validatePhysic(physic: IPhysic): void {\n  if (!physic.parentTermName.length) {\n    throw new MissingRequireFieldPhysicError(PHYSIC_COLUMN_NAMES.parentTermName);\n  }\n  if (!physic.termName.length) {\n    throw new MissingRequireFieldPhysicError(PHYSIC_COLUMN_NAMES.termName);\n  }\n  if (!physic.physicPath.length) {\n    throw new MissingRequireFieldPhysicError(PHYSIC_COLUMN_NAMES.physicPath);\n  }\n  if (physic.physicPath.split('.').length < 3 || physic.physicPath.split('.').length > 4) {\n    throw new UncorrectedPathFormatPhysicError();\n  }\n}\n\nexport function validateCustomFieldId(customFields: undefined | { [x: string]: any }): void {\n  const keys: $Keys<CustomFieldsIdCollection>[] = [\n    'lineageTable',\n    'lineageRef',\n    'alternativeName',\n    'reference',\n    'stewards',\n  ];\n  if (!customFields) {\n    throw new Error('В конфигурационном файле отсутствуют идентификаторы custom fields');\n  }\n\n\n  for (const k of keys) {\n    if (typeof customFields[k] !== 'number') {\n      throw new Error(`В конфигурационном файле отсутствуют идентификатор custom fields ${k}`);\n    }\n  }\n}\n"],"file":"validator.js"}