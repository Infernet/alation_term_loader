{"version":3,"sources":["../../../src/helpers/config.ts"],"names":["loadConfig","path","username","logPath","tokenStoragePath","tokenName","host","password","customFieldsId","JSON","parse","fs","readFileSync","encoding","Error","process","cwd"],"mappings":";;;;;;;AACA;;AACA;;AACA;;;;AAGO,SAASA,UAAT,CAAoBC,IAApB,EAA2C;AAChD,QAAM;AACJC,IAAAA,QADI;AAEJC,IAAAA,OAFI;AAGJC,IAAAA,gBAHI;AAIJC,IAAAA,SAJI;AAKJC,IAAAA,IALI;AAMJC,IAAAA,QANI;AAOJC,IAAAA;AAPI,MAQFC,IAAI,CAACC,KAAL,CAAWC,iBAAGC,YAAH,CAAgBX,IAAhB,EAAsB;AAACY,IAAAA,QAAQ,EAAE;AAAX,GAAtB,CAAX,CARJ;;AAUA,MAAI,CAACX,QAAD,IAAa,CAACK,QAAlB,EAA4B;AAC1B,UAAM,IAAIO,KAAJ,CAAU,6CAAV,CAAN;AACD;;AACD,MAAI,CAACR,IAAL,EAAW;AACT,UAAM,IAAIQ,KAAJ,CAAU,gCAAV,CAAN;AACD;;AACD,wCAAsBN,cAAtB;AAEA,SAAO;AACLN,IAAAA,QADK;AAELK,IAAAA,QAFK;AAGLD,IAAAA,IAHK;AAILD,IAAAA,SAAS,EAAEA,SAAS,GAAGA,SAAH,GAAe,mBAJ9B;AAKLD,IAAAA,gBAAgB,EAAE,sBAAWA,gBAAX,IAA+BA,gBAA/B,GAAkD,gBAAKW,OAAO,CAACC,GAAR,EAAL,EAAoBZ,gBAApB,CAL/D;AAMLD,IAAAA,OAAO,EAAE,sBAAWA,OAAX,IAAsBA,OAAtB,GAAgC,gBAAKY,OAAO,CAACC,GAAR,EAAL,EAAoBb,OAApB,CANpC;AAOLK,IAAAA;AAPK,GAAP;AASD","sourcesContent":["import {IConfig} from '../types';\nimport fs from 'fs-extra';\nimport {isAbsolute, join} from 'path';\nimport {validateCustomFieldId} from './validator';\n\n\nexport function loadConfig(path: string): IConfig {\n  const {\n    username,\n    logPath,\n    tokenStoragePath,\n    tokenName,\n    host,\n    password,\n    customFieldsId,\n  } = JSON.parse(fs.readFileSync(path, {encoding: 'utf-8'})) as IConfig;\n\n  if (!username || !password) {\n    throw new Error('Отсутствуют данные авторизации пользователя');\n  }\n  if (!host) {\n    throw new Error('Отсутствует информация о хосте');\n  }\n  validateCustomFieldId(customFieldsId);\n\n  return {\n    username,\n    password,\n    host,\n    tokenName: tokenName ? tokenName : 'term_loader_token',\n    tokenStoragePath: isAbsolute(tokenStoragePath) ? tokenStoragePath : join(process.cwd(), tokenStoragePath),\n    logPath: isAbsolute(logPath) ? logPath : join(process.cwd(), logPath),\n    customFieldsId,\n  };\n}\n"],"file":"config.js"}